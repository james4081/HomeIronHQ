<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="css/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Generate a custom workout plan in seconds with the HomeIronHQ AI Personal Trainer. Tailor your routine based on your goals, equipment, and time.">
    <title>AI Personal Trainer - HomeIronHQ</title>
</head>
<body>

    <header class="main-header">
        <nav class="main-nav container">
            <a href="index.html" class="logo">HomeIronHQ</a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="store.html">Store</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="ai-workout-generator.html">AI - Personal Trainer</a></li>
            </ul>
            <button class="theme-toggle" id="theme-toggle" title="Toggle light/dark mode">
                <svg class="icon sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.106a.75.75 0 010 1.06l-1.591 1.59a.75.75 0 11-1.06-1.06l1.59-1.59a.75.75 0 011.06 0zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5h2.25a.75.75 0 01.75.75zM17.836 17.894a.75.75 0 011.06 0l1.59 1.59a.75.75 0 11-1.06 1.06l-1.59-1.59a.75.75 0 010-1.06zM12 21.75a.75.75 0 01-.75-.75v-2.25a.75.75 0 011.5 0v2.25a.75.75 0 01-.75.75zM5.106 17.894a.75.75 0 010-1.06l1.59-1.59a.75.75 0 111.06 1.06l-1.59 1.59a.75.75 0 01-1.06 0zM3 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H3.75A.75.75 0 013 12zM6.106 5.106a.75.75 0 011.06 0l1.59 1.59a.75.75 0 01-1.06 1.06L6.106 6.166a.75.75 0 010-1.06z"></path></svg>
                <svg class="icon moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-3.836 2.04-7.175 5.168-8.97a.75.75 0 01.818.162z" clip-rule="evenodd"></path></svg>
            </button>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1>AI - Personal Trainer</h1>
                <p class="subtitle">Generate a custom workout plan in seconds, powered by AI.</p>
            </div>
        </section>

        <div class="generator-container container">
            <aside class="generator-form">
                <h3>Create Your Workout</h3>
                <div class="form-group">
                    <label for="goal">Primary Goal</label>
                    <select id="goal" name="goal">
                        <option value="build-muscle">Build Muscle</option>
                        <option value="lose-fat">Lose Fat</option>
                        <option value="increase-strength">Increase Strength</option>
                        <option value="improve-endurance">Improve Endurance</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="equipment">Available Equipment</label>
                    <select id="equipment" name="equipment">
                        <option value="bodyweight">Bodyweight Only</option>
                        <option value="bands">Resistance Bands</option>
                        <option value="dumbbells">Dumbbells</option>
                        <option value="full-gym">Full Gym</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="duration">Workout Duration (minutes)</label>
                    <select id="duration" name="duration">
                        <option value="20">20 minutes</option>
                        <option value="30">30 minutes</option>
                        <option value="45">45 minutes</option>
                        <option value="60">60 minutes</option>
                    </select>
                </div>
                <button id="generate-btn" class="btn">Generate Workout</button>
            </aside>
            <section id="workout-result" class="workout-output">
                <div id="loading-indicator">
                    <div class="loader"></div>
                    <p>Building your workout...</p>
                </div>
                <div id="workout-plan-content">
                     <h4 class="workout-plan-title">Your Custom Workout Plan</h4>
                     <p>Select your preferences on the left and click "Generate Workout" to get your personalized plan from our AI trainer!</p>
                </div>
            </section>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container footer-content">
            <p>&copy; 2025 HomeIronHQ. All Rights Reserved.</p>
            <p>As an Amazon Associate I earn from qualifying purchases. Our reviews are independent and not influenced by commissions.</p>
        </div>
    </footer>

    <script>
    // --- Theme Switcher Logic ---
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;

    const applyTheme = () => {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            body.classList.add('light-mode');
        }
    };

    const toggleTheme = () => {
        body.classList.toggle('light-mode');
        const currentTheme = body.classList.contains('light-mode') ? 'light' : 'dark';
        localStorage.setItem('theme', currentTheme);
    };

    themeToggle.addEventListener('click', toggleTheme);
    document.addEventListener('DOMContentLoaded', applyTheme);

    // --- AI Generator Logic ---
    const generateBtn = document.getElementById('generate-btn');
    const loadingIndicator = document.getElementById('loading-indicator');
    const workoutPlanContent = document.getElementById('workout-plan-content');

    function displayWorkout(text) {
        const cleanText = text.replace(/\*/g, '').trim();
        const lines = cleanText.split('\n').filter(line => line.trim() !== '');

        let html = '';
        if (lines.length > 0) {
            html += `<h4 class="workout-plan-title">${lines[0]}</h4>`;
        }

        for (let i = 1; i < lines.length; i++) {
            const line = lines[i].trim();

            if (line.endsWith(':')) {
                html += `<h5 class="workout-section-title">${line.slice(0, -1)}</h5>`;
            } else if (line.startsWith('-') && line.includes(':')) {
                const parts = line.split(':');
                const name = parts[0].replace('-', '').trim();
                const details = parts.slice(1).join(':').trim();

                html += `
                    <div class="exercise-item">
                        <span class="exercise-name">${name}</span>
                        <span class="exercise-details">${details}</span>
                    </div>
                `;
            } else if (line.trim()) {
                html += `<p class="workout-note">${line.replace(/^-/, '').trim()}</p>`;
            }
        }

        return html;
    }

    generateBtn.addEventListener('click', async () => {
        const goal = document.getElementById('goal').value;
        const equipment = document.getElementById('equipment').value;
        const duration = document.getElementById('duration').value;

        loadingIndicator.style.display = 'block';
        workoutPlanContent.style.display = 'none';
        generateBtn.disabled = true;

        const prompt = `
            Create a workout plan based on the following criteria:
            - Primary Goal: ${goal}
            - Available Equipment: ${equipment}
            - Workout Duration: ${duration} minutes

            Structure the output clearly with these sections:
            - A creative title for the workout on the very first line.
            - Warm-up:
            - Main Workout:
            - Cool-down:

            Under each section, list exercises starting with a hyphen. For each exercise, specify sets, reps (or time), and a suggested rest period.
            Example for an exercise line: - Goblet Squats: 3 sets of 10-12 reps

            Do not number the main sections (Warm-up, etc.). Do not use asterisks. Do not include any introductory or concluding sentences outside of the plan itself.
        `;

        try {
            const payload = { text: prompt };

            const GEMINI_ENDPOINT = "https://homeiron-gemini-proxy.0james-butler0.workers.dev/";

            const response = await fetch(GEMINI_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.statusText}`);
            }

            const result = await response.json();

            let workoutText = "Sorry, I couldn't generate a workout right now. Please try again.";

            if (result.candidates &&
                result.candidates.length > 0 &&
                result.candidates[0].content &&
                result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                workoutText = result.candidates[0].content.parts[0].text;
            }

            workoutPlanContent.innerHTML = displayWorkout(workoutText);

        } catch (error) {
            console.error("Error fetching workout:", error);
            workoutPlanContent.innerHTML = `
                <h4 class="workout-plan-title">Error</h4>
                <p>There was a problem generating your workout. Please check your connection and try again.</p>
            `;
        } finally {
            loadingIndicator.style.display = 'none';
            workoutPlanContent.style.display = 'block';
            generateBtn.disabled = false;
        }
    });
</script>

</body>
</html>
